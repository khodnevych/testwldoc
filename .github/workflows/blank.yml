name: Automated Repo Sync (A -> B)

on:
  schedule:
    - cron: '0 4 * * *'
  workflow_dispatch:
  
jobs:
  sync_files:
    runs-on: ubuntu-latest
    
    steps:
      - name: ‚¨áÔ∏è Checkout Repo B (–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è)
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.SYNC_TOKEN }}
          
      - name: ‚¨áÔ∏è Clone Repo A (–î–∂–µ—Ä–µ–ª–æ)
        # –ö–ª–æ–Ω—É—î–º–æ Repo A —É —Ç–∏–º—á–∞—Å–æ–≤—É –ø–∞–ø–∫—É
        run: |
          git clone https://${{ secrets.SYNC_TOKEN }}@github.com/Unlaik/GitBookMagazine.git repo-a-source-temp
          
      - name: üîÑ –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø–∏—Å –ø–∞–ø–æ–∫ docs —ñ reference
        # –ö–æ–ø—ñ—é—î–º–æ –ª–∏—à–µ –≤–∫–∞–∑–∞–Ω—ñ –ø–∞–ø–∫–∏. –ö–ª—é—á–æ–≤–µ —Å–ª–æ–≤–æ 'cp -r' –∫–æ–ø—ñ—é—î —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ.
        run: |
          # –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è –ø–∞–ø–∫–∏ docs
          cp -r repo-a-source-temp/.gitbook/assets .
          # –í–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–∏–º—á–∞—Å–æ–≤–æ—ó –ø–∞–ø–∫–∏
          rm -rf repo-a-source-temp
          
      - name: üöÄ –§—ñ–∫—Å–∞—Ü—ñ—è —Ç–∞ –ü—É—à –∑–º—ñ–Ω –¥–æ Repo B
        uses:  stefanzweifel/git-auto-commit-action@v5
        with:
          token: ${{ secrets.SYNC_TOKEN }}
          commit_message: "Sync: Automated update of docs and reference from Repo A"
          branch: v1.0
